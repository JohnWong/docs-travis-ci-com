---
title: 在多操作系统上测试你的项目
layout: en
permalink: /user/multi-os/
---

## 我们目前不接受多操作系统的请求

我们当前精力投入在.org和.com环境中的Mac worker的能力上。因此我们此时无法接受多操作系统的请求。当添加了大多数能力后，我们将会继续接受请求。

### 这是一个beta特性

这份文档中描述的特性是beta版的。一些特性可能并不会像描述的那样工作。

### 人工介入是必要的

这个特性需要人工启用。如果你希望利用这个特性，请发送电子邮件到support@travis-ci.com，指明你希望启用的库。

## 简介

如果你的代码打算在多个操作系统上使用（例如Ruby gem，Python库，Java虚拟机程序），你从测试既定目标中受益。

Travis CI通过提供在Linux与OS X的测试来提供帮助。

## 设置`.travis.yml`

在启用多操作系统特性的库中添加如下内容：

```yaml
os:
  - linux
  - osx
```

## `TRAVIS_OS_NAME`环境变量

要区分工作，你可以使用 `$TRAVIS_OS_NAME`。其值符合`.travis.yml`中的`os`值，是`linux`或`osx`。

## 操作系统差异

当你在多个操作系统上测试你的代码，谨记差异会影响你的测试。

1. 并不是所有的工具都在Mac上可用

	我们仍然致力于在Mac worker上建立工具链。软件的缺失部分通过Homebrew[可能获得](http://braumeister.org/)。

1. 文件系统行为不同

	我们OS X worker的HFS+文件系统是大小写不敏感的（这也是出厂默认值），并且一个目录的文件返回的是有序的。相反，在Linux上文件系统是大小写敏感的，返回的目录条目是按照它们在目录内部出现的顺序，看起来可能是随机的。

	你的测试如果隐式依赖于这些行为，可能因此失败。

1. 毕竟它们是不同的操作系统

	在Mac与Linux上命令可能有相同的名字，但是它们可能有不同的标记，或者同样的标记可能意义不同。在某些情况下，做同样事情的命令可能有不同的名称。这些需要就事论事地研究。

## 语言支持状态

并不是所有的语言在所有的操作系统上都一样可用。在你开启多操作系统测试旅程之前，确保检查[这个GitHub问题](https://github.com/travis-ci/travis-ci/issues/2320)。

## 允许运行在一个操作系统上的工作失败

如果你希望忽略在一个操作系统上的工作的结果，你可以添加如下内容到你的`.travis.yml`：

```yaml
matrix:
  allow_failures:
    - os: osx
```
